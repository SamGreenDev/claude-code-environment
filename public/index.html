<!--
  @file index.html
  @author Sam Green <samuel.green2k@gmail.com>
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Code Environment</title>
  <!-- Distinctive Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <!-- Shared UI Component Library -->
  <link rel="stylesheet" href="/ui-components/styles/tokens.css">
  <link rel="stylesheet" href="/ui-components/styles/reset.css">
  <link rel="stylesheet" href="/ui-components/styles/utilities.css">
  <link rel="stylesheet" href="/ui-components/styles/components.css">
  <!-- App-specific styles (overrides) -->
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <a href="#/" class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
          <span>Environment</span>
        </a>
        <nav class="nav">
          <a href="#/agents" class="nav-link" data-route="agents">Agents</a>
          <a href="#/skills" class="nav-link" data-route="skills">Skills</a>
          <a href="#/commands" class="nav-link" data-route="commands">Commands</a>
          <a href="#/knowledge" class="nav-link" data-route="knowledge">Knowledge</a>
          <a href="#/rules" class="nav-link" data-route="rules">Rules</a>
          <a href="#/plugins" class="nav-link" data-route="plugins">Plugins</a>
          <a href="#/mcp-servers" class="nav-link" data-route="mcp-servers">MCP Servers</a>
          <a href="#/lessons" class="nav-link" data-route="lessons">Lessons</a>
          <a href="#/settings" class="nav-link" data-route="settings">Settings</a>
        </nav>
        <button class="theme-toggle" id="theme-toggle" title="Toggle theme" aria-label="Toggle theme">
          <svg class="theme-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg class="theme-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main">
      <div class="loading">
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <code class="made-by">&lt;SamGreen/&gt;</code>
    </footer>
  </div>

  <!-- Templates -->
  <template id="dashboard-template">
    <div class="dashboard">
      <div class="dashboard-header">
        <h1>Environment Overview</h1>
        <p class="subtitle">Your Claude Code configuration at a glance</p>
      </div>
      <div class="stats-grid" id="stats-grid">
        <!-- Stats cards -->
      </div>
      <div class="dashboard-sections">
        <section class="dashboard-section">
          <h2>Quick Actions</h2>
          <div class="quick-actions">
            <a href="#/agents" class="action-card">
              <span class="action-icon">ü§ñ</span>
              <span class="action-label">View Agents</span>
            </a>
            <a href="#/skills" class="action-card">
              <span class="action-icon">‚ö°</span>
              <span class="action-label">Browse Skills</span>
            </a>
            <a href="#/plugins" class="action-card">
              <span class="action-icon">üîå</span>
              <span class="action-label">View Plugins</span>
            </a>
            <a href="#/knowledge" class="action-card">
              <span class="action-icon">üìö</span>
              <span class="action-label">Knowledge Base</span>
            </a>
            <a href="#/mcp-servers" class="action-card">
              <span class="action-icon">üñ•Ô∏è</span>
              <span class="action-label">MCP Servers</span>
            </a>
          </div>
        </section>
      </div>
    </div>
  </template>

  <template id="stat-card-template">
    <div class="stat-card">
      <div class="stat-icon"></div>
      <div class="stat-info">
        <span class="stat-value"></span>
        <span class="stat-label"></span>
        <span class="stat-subtitle"></span>
      </div>
    </div>
  </template>

  <template id="agents-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Sub-Agents</h1>
        <p class="subtitle">Specialized agents for task delegation</p>
      </div>
      <div class="cards-grid" id="agents-grid">
        <!-- Agent cards -->
      </div>
    </div>
  </template>

  <template id="agent-card-template">
    <div class="agent-card">
      <div class="card-header">
        <h3 class="card-title"></h3>
        <span class="plugin-badge" style="display: none;"></span>
      </div>
      <p class="card-description"></p>
      <div class="card-meta">
        <span class="meta-label">When to use:</span>
        <ul class="when-list"></ul>
      </div>
      <button class="btn btn-secondary view-details">View Details</button>
    </div>
  </template>

  <template id="skills-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Skills</h1>
        <p class="subtitle">Comprehensive workflow skills invoked via slash commands</p>
      </div>
      <div class="cards-grid" id="skills-grid">
        <!-- Skill cards -->
      </div>
    </div>
  </template>

  <template id="commands-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Commands</h1>
        <p class="subtitle">Quick slash commands for common actions</p>
      </div>
      <div class="cards-grid" id="commands-grid">
        <!-- Command cards -->
      </div>
    </div>
  </template>

  <template id="skill-card-template">
    <div class="skill-card">
      <div class="card-header">
        <code class="command-badge"></code>
        <h3 class="card-title"></h3>
      </div>
      <p class="card-description"></p>
      <div class="card-footer">
        <span class="author-badge" style="display: none;"></span>
        <button class="btn btn-secondary view-details">View Details</button>
      </div>
    </div>
  </template>

  <template id="rules-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Rules</h1>
        <p class="subtitle">Coding standards and guidelines</p>
      </div>
      <div class="cards-grid" id="rules-grid">
        <!-- Rule cards -->
      </div>
    </div>
  </template>

  <template id="rule-card-template">
    <div class="rule-card">
      <div class="card-header">
        <h3 class="card-title"></h3>
      </div>
      <div class="card-meta">
        <span class="sections-count"></span>
      </div>
      <button class="btn btn-secondary view-details">View Details</button>
    </div>
  </template>

  <template id="plugins-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Plugins</h1>
        <p class="subtitle">Installed plugin extensions</p>
      </div>
      <div class="plugins-list" id="plugins-list">
        <!-- Plugin items -->
      </div>
    </div>
  </template>

  <template id="plugin-item-template">
    <div class="plugin-item">
      <div class="plugin-row">
        <div class="plugin-icon">üîå</div>
        <div class="plugin-info">
          <span class="plugin-name"></span>
          <span class="plugin-desc"></span>
        </div>
        <span class="plugin-version"></span>
        <svg class="expand-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>
      <div class="plugin-details" aria-hidden="true">
        <div class="plugin-meta">
          <div class="meta-row">
            <span class="meta-label">Author:</span>
            <span class="meta-value plugin-author"></span>
          </div>
          <div class="meta-row">
            <span class="meta-label">License:</span>
            <span class="meta-value plugin-license"></span>
          </div>
          <div class="meta-row">
            <span class="meta-label">Installed:</span>
            <span class="meta-value plugin-installed"></span>
          </div>
        </div>
        <div class="plugin-components">
          <div class="component-section skills-section">
            <h4>Skills</h4>
            <div class="component-list plugin-skills"></div>
          </div>
          <div class="component-section commands-section">
            <h4>Commands</h4>
            <div class="component-list plugin-commands"></div>
          </div>
          <div class="component-section agents-section">
            <h4>Agents</h4>
            <div class="component-list plugin-agents"></div>
          </div>
        </div>
        <div class="plugin-usage">
          <h4>How to Use</h4>
          <p class="usage-text"></p>
        </div>
        <div class="plugin-links">
          <a class="btn btn-secondary plugin-homepage" target="_blank">View Homepage</a>
        </div>
      </div>
    </div>
  </template>

  <template id="knowledge-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Knowledge Base</h1>
        <p class="subtitle">Technology knowledge and learned practices</p>
      </div>
      <div class="knowledge-layout">
        <aside class="knowledge-sidebar">
          <div class="knowledge-search">
            <div class="search-container">
              <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
              </svg>
              <input type="text" id="knowledge-search-input" placeholder="Search files..." autocomplete="off" />
            </div>
            <div id="knowledge-search-results" class="knowledge-search-results"></div>
          </div>
          <div class="tree-container" id="knowledge-tree"></div>
        </aside>
        <main class="knowledge-content" id="knowledge-content">
          <div class="empty-state knowledge-empty">
            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
            </svg>
            <h3>Knowledge Base</h3>
            <p>Select a file from the tree to view its contents, or use the search to find specific topics.</p>
          </div>
        </main>
      </div>
    </div>
  </template>

  <template id="mcp-servers-template">
    <div class="page-container">
      <div class="page-header">
        <h1>MCP Servers</h1>
        <p class="subtitle">Model Context Protocol server configurations</p>
      </div>
      <div class="mcp-stats" id="mcp-stats">
        <!-- Stats cards -->
      </div>
      <div class="mcp-servers-list" id="mcp-servers-list">
        <!-- Server cards -->
      </div>
    </div>
  </template>

  <template id="mcp-server-card-template">
    <div class="mcp-server-card">
      <div class="mcp-server-header">
        <div class="mcp-server-icon"></div>
        <div class="mcp-server-info">
          <h3 class="mcp-server-name"></h3>
          <span class="mcp-server-type"></span>
        </div>
        <span class="mcp-server-status"></span>
      </div>
      <div class="mcp-server-details">
        <div class="mcp-detail-row">
          <span class="mcp-detail-label">Command</span>
          <code class="mcp-detail-value mcp-command"></code>
        </div>
        <div class="mcp-detail-row mcp-args-row">
          <span class="mcp-detail-label">Arguments</span>
          <code class="mcp-detail-value mcp-args"></code>
        </div>
        <div class="mcp-detail-row mcp-env-row">
          <span class="mcp-detail-label">Environment</span>
          <span class="mcp-detail-value mcp-env"></span>
        </div>
      </div>
      <div class="mcp-server-source">
        <span class="mcp-source-badge"></span>
      </div>
    </div>
  </template>

  <template id="lessons-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Lessons Learned</h1>
        <p class="subtitle">Claude's self-corrections and learned patterns</p>
      </div>
      <div class="lessons-stats" id="lessons-stats">
        <!-- Stats cards -->
      </div>
      <div class="lessons-filters">
        <div class="filter-group">
          <label for="category-filter">Category</label>
          <select id="category-filter" class="filter-select">
            <option value="">All Categories</option>
            <option value="async-patterns">Async Patterns</option>
            <option value="type-errors">Type Errors</option>
            <option value="api-misuse">API Misuse</option>
            <option value="syntax">Syntax</option>
            <option value="logic">Logic</option>
            <option value="imports">Imports</option>
            <option value="patterns">Patterns</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="tech-filter">Technology</label>
          <select id="tech-filter" class="filter-select">
            <option value="">All Tech</option>
          </select>
        </div>
        <div class="filter-group search-group">
          <label for="lessons-search">Search</label>
          <input type="text" id="lessons-search" class="filter-input" placeholder="Search lessons..." />
        </div>
      </div>
      <div class="lessons-list" id="lessons-list">
        <!-- Lesson cards -->
      </div>
    </div>
  </template>

  <template id="lesson-card-template">
    <div class="lesson-card">
      <div class="lesson-header">
        <span class="lesson-category"></span>
        <span class="lesson-date"></span>
      </div>
      <div class="lesson-content">
        <p class="lesson-text"></p>
        <div class="lesson-tech"></div>
      </div>
      <div class="lesson-code">
        <div class="code-block failed">
          <span class="code-label">Failed</span>
          <code class="failed-code"></code>
        </div>
        <div class="code-block fixed">
          <span class="code-label">Fixed</span>
          <code class="fixed-code"></code>
        </div>
      </div>
      <div class="lesson-error"></div>
      <div class="lesson-footer">
        <span class="lesson-hits"></span>
        <div class="lesson-actions">
          <button class="btn btn-secondary btn-sm promote-btn">Promote to KB</button>
          <button class="btn btn-danger btn-sm delete-btn">Delete</button>
        </div>
      </div>
    </div>
  </template>

  <template id="settings-template">
    <div class="page-container">
      <div class="page-header">
        <h1>Settings</h1>
        <p class="subtitle">Configure your Claude Code environment at user and project levels</p>
      </div>
      <div class="settings-sections">
        <!-- Project Selector -->
        <section class="settings-section project-selector-section">
          <div class="project-selector-header">
            <div class="project-selector-info">
              <h2>Project Configuration</h2>
              <p class="section-desc">Enter a project path to view and edit project-level settings</p>
            </div>
            <div class="settings-level-indicator" id="settings-level-indicator">
              <span class="level-badge user active">User Level</span>
            </div>
          </div>
          <div class="project-path-input">
            <input type="text" id="project-path" placeholder="/path/to/project" />
            <button class="btn btn-primary" id="set-project-btn">Set Project</button>
          </div>
          <div class="project-status" id="project-status"></div>
        </section>

        <!-- Hooks & Environment Variables - Side by Side -->
        <div class="settings-row-container">
          <section class="settings-section hooks-section">
            <h2>Hooks</h2>
            <p class="section-desc">Scripts that run during Claude Code operations</p>
            <div class="hooks-list" id="hooks-list">
              <!-- Hook toggles rendered here -->
            </div>
          </section>
          <section class="settings-section env-section">
            <h2>Environment Variables</h2>
            <p class="section-desc">Control analysis behavior and feature toggles</p>
            <div class="env-vars" id="env-vars">
              <!-- Env var settings rendered here -->
            </div>
          </section>
        </div>
      </div>
    </div>
  </template>

  <template id="hook-item-template">
    <div class="hook-item">
      <div class="hook-info">
        <span class="hook-name"></span>
        <span class="hook-type"></span>
        <span class="hook-matcher"></span>
      </div>
      <label class="toggle">
        <input type="checkbox" class="hook-toggle">
        <span class="toggle-slider"></span>
      </label>
    </div>
  </template>

  <template id="env-toggle-template">
    <div class="setting-item">
      <div class="setting-info">
        <span class="setting-label"></span>
        <span class="setting-desc"></span>
      </div>
      <label class="toggle">
        <input type="checkbox" class="setting-toggle">
        <span class="toggle-slider"></span>
      </label>
    </div>
  </template>

  <template id="env-select-template">
    <div class="setting-item">
      <div class="setting-info">
        <span class="setting-label"></span>
        <span class="setting-desc"></span>
      </div>
      <select class="setting-select"></select>
    </div>
  </template>

  <template id="detail-modal-template">
    <div class="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title"></h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body markdown-body"></div>
      </div>
    </div>
  </template>

  <template id="error-template">
    <div class="error-container">
      <div class="error-icon">‚ö†Ô∏è</div>
      <h2>Something went wrong</h2>
      <p class="error-message"></p>
      <a href="#/" class="btn btn-primary">Go to Dashboard</a>
    </div>
  </template>

  <script src="/vendor/marked.min.js"></script>
  <script src="/app.js"></script>
</body>
</html>
